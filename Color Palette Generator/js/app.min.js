let colorPalette = document.getElementById("color-palette");
let currentElem;

function notification(msg) {
  let old_div = document.querySelector(".alert");

  //eski div varmı kontrol edelim

  if (old_div) {
    //varsa silelim div i
    old_div.parentNode.removeChild(old_div);
  }
  let div = document.createElement("div1");
  div.className = "alert";
  div.innerHTML = msg;
  document.body.appendChild(div);

  setTimeout(() => div.classList.add("active"), 1);
  setTimeout(() => div.classList.remove("active"), 1000);
}
//5 adet paletin oluşturulması
function generateColorPalette() {
  colorPalette.innerHTML = "";

  for (let i = 1; i <= 5; i++) {
    let color = generateColor();
    let li = document.createElement("li");
    let a = document.createElement("a");

    let spanColor = document.createElement("span");
    spanColor.className = "color";
    spanColor.style.setProperty("--color", color);

    let spanText = document.createElement("span");
    spanText.className = "text";
    spanText.innerText = color;

    let input = document.createElement("input");
    input.name = "color";
    input.value = color;

    //oluşturduğumuz span color ve spantext i a ya ekleme işlemi
    a.appendChild(spanColor);
    a.appendChild(input);
    a.appendChild(spanText);

    //li nin içine a yı ekleme
    li.appendChild(a);
    colorPalette.appendChild(li);

    //paletteki bir elemanın üstüne geldiğimizde
    //hangisinin seçildiğini mouseover ile öğreniyoruz.
    li.addEventListener("mouseover", (e) => {
      currentElem = e.target.parentNode;
    });

    //paletteki seçilen rengin adını almak için hangi
    //elemana tıklandığını click ile dinliyoruz
    li.addEventListener("click", (e) => {
      let targetInput = e.target.parentNode.querySelector(
        'input[name="color"]'
      );
      targetInput.select();
      document.execCommand("copy");
      notification(
        "Color <b>" + targetInput.value + "</b> copied to your clipboard"
      );
    });
  }
}

//rastgele renk kodlarının oluşturulması.
function generateColor() {
  let str = "abcdef0123456789";
  let color = "#";
  for (let i = 0; i <= 5; i++) {
    color += str[Math.floor(Math.random() * str.length)];
  }
  return color;
}

//ekran dinlenerek space e basınca  renk paletini değiştirme!!
window.addEventListener("keypress", (e) => {
  if (e.keyCode == 32) {
    generateColorPalette();
  } else if (e.keyCode === 99 && currentElem) {
    let targetInput = currentElem.querySelector('input[name="color"]');
    targetInput.select();
    document.execCommand("copy");
    notification(
      "Color <b>" + targetInput.value + "</b> copied to your clipboard"
    );
    e.preventDefault();
    //document.body.style.backgroundColor = targetInput.value;
  }
});

//ekran dinlenerek space e basınca  renk paletini değiştirme!!
// window.addEventListener("keypress", (e) => {
//     if (e.code == "Space") {
//       generateColorPalette();
//     }
//   });

//ekran dinlenerek space e basınca  renk paletini değiştirme!!
// document.body.onkeyup = function (e) {
//     if (e.key == " ") {
//       generateColorPalette();
//     }
//   };

//ekran dinlenerek space e basınca  renk paletini değiştirme!!
// document.body.onkeyup = function (e) {
//     if (e.keyCode == 32) {
//       generateColorPalette();
//     }
//   };

generateColorPalette();
